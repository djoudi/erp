##################################################################

WorkingHourDay:

    actAs:
        Auditable: ~
        SoftDelete: ~
        Versionable: ~
    columns:
        type:
            type: enum
            values: ["Enter", "Exit"]
            default: "Enter"
            notnull: true
        user_id:
            type: integer
            notnull: true
        date:
            type: date
            notnull: true
        time:
            type: time
            notnull: true
    relations:
        User:
            class: sfGuardUser
            local: user_id
            foreign: id
            foreignAlias: WorkingHours
            onDelete: CASCADE

##################################################################

WorkType:

    actAs:
        Auditable: ~
        SoftDelete: ~
        Versionable: ~
    columns:
        code:
            type: string(5)
            unique: true
            notnull: true
        title:
            type: string(250)
            unique: true
            notnull: true

##################################################################

sfGuardGroupWorkType:

    options:
        symfony:
            form:   false
            filter: false
    actAs:
        Auditable: ~
        SoftDelete: ~
        Versionable: ~
    columns:
        group_id:
            type: integer
            primary: true
        worktype_id:
            type: integer
            primary: true
    relations:
        Group:
            class: sfGuardGroup
            local: group_id
            onDelete: CASCADE
        WorkType:
            class: WorkType
            local: worktype_id
            onDelete: CASCADE

##################################################################

sfGuardUser:

    columns:
        IllnessWoReportLimit:
            type: integer
            default: 0
        IllnessWReportLimit:
            type: integer
            default: 0
        PaidVacationLimit:
            type: integer
            default: 0
        UnpaidVacationLimit:
            type: integer
            default: 0
        
        Monthly_Working_Hours:
            type: integer
            default: 0
        
##################################################################

sfGuardGroup:

    relations:
        Worktypes:
            class: WorkType
            local: group_id
            foreign: worktype_id
            refClass: sfGuardGroupWorkType
            foreignAlias: Groups

##################################################################

WorkingHourLeave:

    actAs:
        Auditable: ~
        SoftDelete: ~
        Versionable: ~
    columns:
        user_id:
            type: integer
            notnull: true
        type:
            type: enum
            values: ["IllnessWReport", "IllnessWoReport", "PaidVacation", "UnpaidVacation"]
            notnull: true
        from_Date:
            type: date
            notnull: true
        to_Date:
            type: date
            notnull: true
        description:
            type: string(50)  
        status:
            type: enum
            values: ["Pending", "Approved", "Denied", "Cancelled"]
            notnull: true
        report_Date:
            type: date
            notnull: false
        report_Received:
            type: boolean
            default: false
            notnull: false
        report_Received_On:
            type: date
            notnull: false
    relations:
        User:
            class: sfGuardUser
            local: user_id
            foreign: id
            foreignAlias: WorkingHourLeave
            onDelete: CASCADE

##################################################################

WorkingHour:
    actAs:
        Auditable: ~
        SoftDelete: ~
        Versionable: ~
    columns:
        user_id:
            type: integer
            notnull: true
        date:
            type: date
            notnull: true
        project_id:
            type: integer
            notnull: true
        worktype_id:
            type: integer
            notnull: true
        comment:
            type: string(250)
        start:
            type: time
            notnull: true
        end:
            type: time
            notnull: true
    relations:
        User:
            class: sfGuardUser
            local: user_id
            foreign: id
            foreignAlias: WorkingHours
            onDelete: CASCADE
        Project:
            class: Project
            local: project_id
            foreign: id
            foreignAlias: WorkingHours
            onDelete: CASCADE
        WorkType:
            class: WorkType
            local: worktype_id
            foreign: id
            foreignAlias: WorkTypes
