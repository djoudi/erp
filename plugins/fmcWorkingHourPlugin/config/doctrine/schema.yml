######################################################

Holiday:
    options:
        symfony:
            filter: false
    actAs:
        Auditable: ~
        SoftDelete: ~
        Versionable: ~
    columns:
        date:
            type: Date
            notnull: true
            unique: true
            primary: true
        name:
            type: string(50)
            notnull: true
            unique: true
            primary: true

######################################################

LeaveRequestType:
    options:
        symfony:
            filter: false
    actAs:
        Auditable: ~
        SoftDelete: ~
        Versionable: ~
    columns:
        name:
            type: string(50)
            notnull: true
            unique: true
        has_Report:
            type: boolean
            notnull: true
            default: false

######################################################

LeaveRequestLimit:
    actAs:
        Auditable: ~
        SoftDelete: ~
        Versionable: ~
    columns:
        user_id:
            type: integer
            notnull: true
        type_id:
            type: integer
            notnull: true
        leaveLimit:
            type: integer
            notnull: true
    relations:
        Employee:
            class: sfGuardUser
            local: user_id
            foreign: id
            foreignAlias: LeaveRequestLimit
            onDelete: CASCADE
        LeaveType:
            class: LeaveRequestType
            local: type_id
            foreign: id
            foreignAlias: LeaveRequestLimit
            onDelete: CASCADE

######################################################

LeaveRequest:
    actAs:
        Auditable: ~
        SoftDelete: ~
        Versionable: ~
    columns:
        user_id:
            type: integer
            notnull: true
        type_id:
            type: integer
            notnull: true
        status:
            type: enum
            values: ['Accepted', 'Denied', 'Pending', 'Cancelled']
            default: 'Pending'
            notnull: true
        start_Date:
            type: date
            notnull: true
        end_Date:
            type: date
            notnull: true
        day_Count:
            type: integer
            notnull: true
            default: 0
        report_Comment:
            type: string(50)
            notnull: false
        report_Date:
            type: date
            notnull: false
        report_Received:
            type: date
            notnull: false
    relations:
        Employee:
            class: sfGuardUser
            local: user_id
            foreign: id
            foreignAlias: LeaveRequest
            onDelete: CASCADE
        LeaveType:
            class: LeaveRequestType
            local: type_id
            foreign: id
            foreignAlias: LeaveRequest
            onDelete: CASCADE

######################################################

WorkingHourParameter:
    options:
        symfony:
            filter: false
    actAs:
        Auditable: ~
        SoftDelete: ~
        Versionable: ~
    columns:
        param:
            type: string(50)
            notnull: true
        value:
            type: string(50)
            notnull: true
        description:
            type: string(50)
            notnull: true

######################################################

WorkingHourWorkType:
    actAs:
        Auditable: ~
        SoftDelete: ~
        Versionable: ~
    columns:
        name:
            type: string(50)
            notnull: true
            unique: true
    relations:
        Employees:
            class: sfGuardUser
            local: worktype_id
            foreign: user_id
            refClass: WorkingHourWorkTypeUser
            foreignAlias: WorkingHourWorkTypes
        Users:
            class: sfGuardUser
            local: worktype_id
            foreign: user_id
            refClass: WorkingHourWorkTypeUser
            foreignAlias: WorkingHourWorkTypes

######################################################

WorkingHourWorkTypeUser:
    options:
        symfony:
            form:   false
            filter: false
    actAs:
        Auditable: ~
        SoftDelete: ~
        Versionable: ~
    columns:
        worktype_id:
            type: integer
            primary: true
        user_id:
            type: integer
            primary: true
    relations:
        WorkingHourWorkType:
            class: WorkingHourWorkType
            local: worktype_id
            onDelete: CASCADE
        Employee:
            class: sfGuardUser
            local: user_id
            onDelete: CASCADE

######################################################

WorkingHourWorkTypeGroup:
    options:
        symfony:
            form:   false
            filter: false
    actAs:
        Auditable: ~
        SoftDelete: ~
        Versionable: ~
    columns:
        worktype_id:
            type: integer
            primary: true
        group_id:
            type: integer
            primary: true
    relations:
        WorkingHourWorkType:
            class: WorkingHourWorkType
            local: worktype_id
            onDelete: CASCADE
        Department:
            class: sfGuardGroup
            local: group_id
            onDelete: CASCADE

######################################################

WorkingHourQuota:
    options:
        symfony:
            filter: false
    actAs:
        Auditable: ~
        SoftDelete: ~
        Versionable: ~
    columns:
        user_id:
            type: integer
            notnull: true
        quota:
            type: integer
            notnull: true
    relations:
        Employee:
            class: sfGuardUser
            local: user_id
            foreign: id
            foreignAlias: WorkingHourQuota
            onDelete: CASCADE

######################################################

WorkingHourDay:
    actAs:
        Auditable: ~
        SoftDelete: ~
        Versionable: ~
    columns:
        user_id:
            type: integer
            notnull: true
        leave_id:
            type: integer
            notnull: false
            default: NULL
        date:
            type: date
            notnull: true
        status:
            type: enum
            values: ['Accepted', 'Denied', 'Pending', 'Cancelled']
            default: 'Pending'
            notnull: true
        multiplier:
            type: decimal
            notnull: true
            default: 1
    relations:
        Employee:
            class: sfGuardUser
            local: user_id
            foreign: id
            foreignAlias: WorkingHourDay
            onDelete: CASCADE
        LeaveRequest:
            class: LeaveRequest
            local: leave_id
            foreign: id
            foreignAlias: WorkingHourDay
            onDelete: CASCADE

######################################################

WorkingHourEntranceExit:
    actAs:
        Auditable: ~
        SoftDelete: ~
        Versionable: ~
    columns:
        day_id:
            type: integer
            notnull: true
        type:
            type: enum
            values: ['Entrance', 'Exit']
            default: 'Entrance'
            notnull: true
        time:
            type: time
            notnull: true
    relations:
        Day:
            class: WorkingHourDay
            local: day_id
            foreign: id
            foreignAlias: WorkingHourEntranceExit
            onDelete: CASCADE

######################################################

WorkingHourWork:
    actAs:
        Auditable: ~
        SoftDelete: ~
        Versionable: ~
    columns:
        day_id:
            type: integer
            notnull: true
        type_id:
            type: integer
            notnull: true
        start:
            type: time
            notnull: true
        end:
            type: time
            notnull: true
        comment:
            type: string(50)
            notnull: false
    relations:
        Day:
            class: WorkingHourDay
            local: day_id
            foreign: id
            foreignAlias: WorkingHourWork
            onDelete: CASCADE
        WorkType:
            class: WorkingHourWorkType
            local: type_id
            foreign: id
            foreignAlias: WorkingHourWork
            onDelete: CASCADE

